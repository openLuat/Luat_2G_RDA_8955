发布时间：2018/05/16 14:00
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.9
	(1)http.lua，https.lua：修正“request之后，回调函数之前，调用destroy接口，过一段时间会出现语法错误重启”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：request之后有一个30秒的定时器会用到client对象，destroy时销毁了这个对象，但是没有停止定时器，所以定时器时间到之后，调用client对象出错
		【问题解决方式】：destroy时关闭定时器
	(2)http.lua，https.lua：修正“response的头中没有Content-Length和chunk编码时，解析出错”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：代码中没处理这种情况
		【问题解决方式】：添加对此种情况的处理，服务器关闭或者超时之后，调用用户回调
	(3)http.lua，https.lua：修正“getstatus接口功能错误”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：代码实现错误
		【问题解决方式】：重新实现
	(4)pins.lua：修正“调用dereg接口之后，再调用reg接口，会导致重启”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：高概率
		【问题出现原因】：dereg之后，再重新reg，会重复初始化所有已经reg过的pin脚，引起重启
		【问题解决方式】：reg不再重复初始化已经初始化pin脚




发布时间：2018/04/24 18:34
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.8
	(1)nvm.lua：修正“硬件掉电时，如果正在写参数文件，可能造成文件内容出错，恢复成默认值”的问题
		【问题重要性】：重要
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：概率出现
		【问题出现原因】：写文件时，如果硬件掉电，可能造成参数文件内容出错，下次开机使用参数文件，检测到错误，就自动恢复为默认值
		【问题解决方式】：写文件时，先写到一个备份文件中，然后删除参数文件，备份文件改名为参数文件。下次开机初始化时，会检查参数文件和备份文件，哪个正确使用哪个



发布时间：2018/04/02 22:42
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.7
	(1)aliyuniotsslauth：修正“连接阿里云进行设备认证失败”的问题
		【问题重要性】：重要
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：阿里云在4月2日更新一次后台后，去掉了HTTP应答行中的一个非必选字段，但是终端软件把此字段当成了必选字段来检查，导致检查失败
		【问题解决方式】：终端软件不再检查非必选字段。同时经过与阿里云的沟通，他们为了兼容我们已经量产的设备，重新添加了非必选字段。但是还是强烈建议用户升级lib脚本到1.1.7，以避免以后阿里云再去掉此字段，导致出现同样的问题
    二、demo脚本修改
	(1)call_rec：新增通话中录音的demo
	(2)完善所有demo的main.lua中对require"wdt"的注释说明



发布时间：2018/02/26 15:44
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.6
	(1)linkssl：修正“存在ssl socket连接的情况下，再新建一个ssl连接，新连接配置证书失败”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：存在ssl连接的情况下，有一个初始化标志设置为TRUE，此标志会导致后续的新连接证书无法执行导入的程序
		【问题解决方式】：证书导入功能和初始化标志不再关联
	(2)aliyuniotota：新增“阿里云OTA（设备固件升级）”的功能
		【新功能重要性】：一般
		【新功能影响模块】：Air202、Air800、Air801、Air201、Air208
		【新功能说明】：升级包放在阿里云iot控制台上，参考aliyun_ssl_huadong2的demo说明
    二、demo脚本修改
	(1)aliyun_ssl_huadong2：新增阿里云OTA功能的使用说明
	(2)proto_buffer：新增"google proto buffer编解码测试demo"，需要配合大于等于0020版本的lod使用
	(3)crypto：新增"计算文件的md5值"的使用说明，需要配合大于等于0020版本的lod使用
	(4)default：修改功能，每秒一次，uart1和uart2向外输出“烧写的软件为Luat软件，不是AT软件”的提示
	(5)http、https：修正“http和https的demo中，获取的数据保存到文件中时，如果保存失败，脚本重启”的问题
	(6)crypto：新增"aes.encrypt和aes.decrypt"接口的使用说明，需要配合大于等于0020版本的lod使用



发布时间：2018/02/12 00:21
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.5
	(1)http,https：优化http数据接收逻辑；request时支持文件和字符串的混合发送
		【重要性】：轻微
		【影响模块】：Air202、Air800、Air801、Air201、Air208
		【优化方式】：去除冗余部分，优化chunk传输数据的解析方式
	(2)misc：修正“core V0016版本开始，misc.setimei和misc.setsn接口，如果用户不传入自定义回调函数，写imei或者写sn成功后，不会自动重启”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208，从core V0016版本开始才有此问题
		【问题出现概率】：必现
		【问题出现原因】：core从V0016之后版本，优化了文件系统读写操作，写IMEI和写SN之后，不用重启软件，就可以百分百保证写成功；但是0015以及之前的版本，写IMEI和写SN之后，必须重启才能保证写成功；所以从V0016开始，用户脚本调用misc.setimei和misc.setsn接口之后，表现为不再重启，与setimei和setsn的接口定义不符
		【问题解决方式】：脚本主动判断，如果是core V0016之后的版本，写imei和写sn之后，主动调用重启接口来保证设备重启
	(3)mqtt、mqttssl：修正“连接断开后，在自动重连的过程中，概率性导致重启”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：较低，只有在网络环境非常不稳定，并且keepalive时间较短（例如2分钟以内）的情况下，才有可能出现
		【问题出现原因】：有一个“keep alive的定时器，如果3倍keep alive+半分钟与服务器通信异常，并且用户脚本没有函数处理这种异常，则会重启”，连接断开后，没有停掉这个定时器，在重连过程中，如果很长时间都连接失败，会重试很多次，这个重试的时间如果超过keep alive定时器时间，则引起重启
		【问题解决方式】：连接断开后，关闭keep alive定时器
	(4)sys：修正“调用uart.setup配置为中断接收数据后，在调用sys.reguart之前，uart收到了数据，调用sys.reguart之后，回调函数永远收不到数据”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：必现
		【问题出现原因】：uart中断接收数据的原理是：core中断收到数据后，会通知脚本，在脚本reguart之前，是收不到这个通知消息的，从而导致core中的接收数据一直没有被读取，后续才收到数据就不会产生性的通知消息到脚本
		【问题解决方式】：sys.reguart接口增加一个参数，用户脚本可以控制调用reguart时，是否清空之前接收的数据，清空后，后续收到的数据就可以接收到了。必须配合core V0019之后的版本使用
	(4)updatehttp：新增“通过HTTP的GET命令下载升级包，支持远程升级”的功能
		【新功能重要性】：一般
		【新功能影响模块】：Air202、Air800、Air801、Air201、Air208
		【新功能说明】：升级包放在HTTP服务器上，终端模块通过HTTP的GET命令下载升级包。可以“直接使用Luat的iot网站配置升级”，或者“用户自行搭建HTTP服务器，支持GET命令下载升级包”
    二、demo脚本修改
	(1)http,https：修正“rcvcbfile函数中没有判断status的正确性，直接使用其他参数，可能引起重启”的问题
	(2)update_http：新增通过HTTP的GET命令执行升级功能的演示demo，支持Luat服务器和用户自建服务器升级
	(3)ui：修正“文件名过长导致远程升级失败”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208，从core V0016版本开始才有此问题
		【问题出现概率】：必现
		【问题出现原因】：core从V0016之后版本，文件系统中的完整文件路径不能超过31字节，远程升级后新版本的脚本和资源文件，是存储在文件系统中的，所以必须要限制文件名长度，否则文件存储失败，升级也就失败。脚本文件的完整路径是/lua/XXX.lua，例如文件color_standard_spi_st7735.lua的完整路径为/lua/color_standard_spi_st7735.lua，一共34字节，超过了31字节，所以远程升级就会失败；资源文件（例如图片、音频、证书文件等非Lua脚本文件）的完整路径是/ldata/XXX.yyy
		【问题解决方式】：非加密升级时：脚本文件名的长度（包括后缀）不能超过31-5(/lua/的长度)=26字节，资源文件名的长度（包括后缀）不能超过31-7(/ldata/的长度)=24字节
		                  加密升级时：文件后缀会添加一个e，所以加密升级时的脚本文件名长度（包括后缀）不能超过25字节，资源文件名的长度（包括后缀）不能超过23字节



发布时间：2018/01/20 09:20
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.4
	(1)http,https：修正“http请求发送失败时，或者请求发送成功，但是超时没收到任何应答时，没有通过回调函数通知用户应用脚本程序”的问题
		【问题重要性】：严重
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：使用到http或者https功能时，在网络异常状态下(例如信号差，基站容量饱和)，会高概率出现；网络正常时，很难出现
		【问题出现原因】：在网络异常时，会概率导致发送失败或者接收不到应答数据，出现此问题时，没有通知到用户脚本中的回调函数，导致用户不知道出现了错误，影响后续逻辑处理
		【问题解决方式】：请求发送失败时，传入一个"SEND"参数到用户回调sckerrcb中；没有收到任何应答数据，30秒超时后，传入错误码3到用户回调rcvcb中；使用方式参考http和https的demo
	(2)agps,agpsupgpd：修正“网络异常时，agps功能执行中断，导致GPS被打开后没有被关闭，从而引起功耗偏高”的问题
		【问题重要性】：严重
		【问题影响模块】：Air800、Air801
		【问题出现概率】：使用到agps功能时，在网络异常状态下(例如信号差，基站容量饱和)，会高概率出现；网络正常时，很难出现
		【问题出现原因】：连接agps星历服务器之前，会打开GPS；在网络异常时，会概率导致与星历服务器之间的通信出现发送失败或者接收不到应答数据异常，出现此问题时，没有关闭GPS，导致GPS一直处于开启状态，从而引起功耗偏高
		【问题解决方式】：从星历服务器成功下载星历后，才去打开GPS，写星历到GPS模块中，写成功或者20秒超时都会去关闭GPS
	(3)http,https：修正“收到多个HTTP报文粘包时，解析出错”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：使用到http或者https功能时，当服务器高频率（例如至少2秒以内1个包）发送数据时，容易出现；低频率发送时，很难出现
		【问题出现原因】：服务器高频率发送时，从Luat core传递给Luat script的数据出现了粘包，此时script没处理好，就认为数据非法，从而通过rcvcb返回错误
		【问题解决方式】：根据http头信息中的Content-Length值，判断后续body数据内容，如果收到的数据超过了这个值，只获取到此值指定的位置。后续数据在下个循环中继续解析处理
	(4)keypad：修正“调用keypad.setup时第一个参数传入nil时，按下powerkey键会重启”的问题
		【问题重要性】：一般
		【问题影响模块】：Air202、Air800、Air801、Air201、Air208
		【问题出现概率】：使用到keypad功能、并且调用了keypad.setup,第一个参数传入了nil，当按下powerkey键会重启。只要同时满足这些条件，此问题必现；反之不出现
		【问题出现原因】：调用setup接口，第一个参数传入nil时，把keypad.lua中的“长按键时间”变量设置为了nil，在按下powerkey键时，会用这个长按键时间启动一个定时器，这个时间为nil，所以重启
		【问题解决方式】：长按键时间传入nil时，赋值默认的3000毫秒
	(5)nvm：提高参数文件的写入速度
		【重要性】：轻微
		【影响模块】：Air202、Air800、Air801、Air201、Air208
		【优化方式】：原来nvm.set接口会写多次文件，修改后只写一次，可大大提高效率
    二、demo脚本修改
	(1)http,https：演示“http请求发送失败时，或者请求发送成功，但是超时没收到任何应答时”的错误异常处理



发布时间：2018/01/17 22:23
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.3
	(1)linkssl：修正“ssl连接没有配置ca证书时会重启”的问题
	(2)ril：支持SSL多连接
	(3)nvm：修正“保存参数文件过程中，如果异常断电，会概率性导致后续开机一直重启”的问题
    二、demo脚本修改
	(1)ui：新增ILI9341驱动IC的LCD示例
	(2)socket_ssl/long_connection_verify_server_and_client：新增socket ssl双向认证的示例
	(3)https/verify_server_and_client：新增https双向认证的示例



发布时间：2018/01/03 18:32
修改记录：
    一、lib脚本修改
	lib脚本版本号：1.1.2
	(1)http：支持“POST”方法，自动添加Content-Length首部
	(2)mqttssl：支持tls1.2版本
	(3)https：支持https
    二、demo脚本修改
        (1)mqtt_ssl：演示如何编码校验服务器端的证书
        (2)https：连接百度主页https://www.baidu.com,演示https的使用



发布时间：2017/12/08 13:23
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.1.1
        (1)http：支持“http应答body自动保存到文件”功能
    二、demo脚本修改
        (1)http：支持“http应答body自动保存到文件”功能


发布时间：2017/11/18 14:47
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.1.0
        (1)http：修正“request时存在自定义head时异常重启”的问题
        (2)agps：修正“开机会重复连接1次服务器”的问题
        (3)agpsupgpd：修正“连接星历服务器的socket id可能和其他socket id冲突”的问题
        (4)mqtt、mqttssl：新增unsubscribe取消订阅主题的接口
    二、demo脚本修改
        (1)socket_ssl：规范ca证书文件的后缀名



发布时间：2017/10/29 16:33
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.9
        (1)audio：修正“tts播放时，请求新的tts播放，新的tts播放异常”的问题
        (2)gps：修正“不加载agps模块，gps无法正常工作”的问题
        (3)sys：修正1.0.7和1.0.8 lib脚本中出现的“远程升级的脚本运行过程中存在语法错误时，无法自动回退到烧写的原始脚本”的问题
        (4)支持“单个socket连接出错时，不再直接调用link.shut关闭所有socket连接，先仅关闭当前出错的连接，然后自动重连，只有多次重连连续失败，才去调用link.shut”
    二、demo脚本修改
        (1)audio：演示“tts播放时，请求新的tts播放”的功能
        (2)i2c：演示“i2c.send和i2c.recv”接口的使用
        (3)socket、socket_ssl：支持“单个socket连接出错时，不再直接调用link.shut关闭所有socket连接，先仅关闭当前出错的连接，然后自动重连，只有多次重连连续失败，才去调用link.shut”



发布时间：2017/9/18 16:49
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.8
        (1)sms：修正“长短信自动拼接”的问题
        (2)wdt：修改硬件狗使用的默认引脚
        (3)linkssl、mqttssl：优化ssl的控制逻辑
        (4)sys：新增对MODULE_TYPE配置的强制检查
    二、demo脚本修改
        (1)gpio_single：修正ldo对gpio控制的注释说明
        (2)所有main.lua中增加对MODULE_TYPE的配置
        (3)ui：完善SPI接口的LCD显示功能（标准SPI引脚、LCD专用SPI引脚、黑白屏、彩屏）
        (4)spi：新增spi的demo
        (5)fs：新增文件系统剩余空间、创建目录的功能使用示例



发布时间：2017/9/5 11:58
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.7
        (1)keypad：新增powerkey按键的处理功能
        (2)sms：修正“收到的长短信没有自动拼接”的问题
        (3)sys、update、dbg：新增“远程升级或者dbg上报过程中，禁止“语法错误或者sys.restart接口”的重启功能”	
        (4)patch.lua：重新封装json.decode接口，增加decode的返回值。使用方式参考json的demo
        (5)http.lua：修正“chunk传输数据时解包错误”的问题
        (6)nvm.lua：修正“table类型参数如果旧值是空表，设置新值时失败”的问题
        (7)mqtt.lua、mqttssl.lua：支持“用户自定义异常处理程序”的功能
    二、demo脚本修改
        (1)default：支持“开机运行过程中长按power key按键，自动关机”功能
        (2)json：json.decode接口增加返回值表示解析结果
        (3)mqtt、mqttssl：支持一种默认的异常处理程序
        (4)i2c：规范代码
        (5)update：添加<重要提醒.txt>



发布时间：2017/8/18 10:31
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.6
        (1)uiwin：修正isactive的bug
        (2)wdt：新增setup接口，支持自定义喂狗引脚
    二、demo脚本修改
        (1)adc：完善注释
        (2)ui：优化代码结构
        (3)crypto：支持sha1和hmac_sha1算法
        (4)gpio_single：添加电压域对GPIO的控制说明
        (5)i2c：规范i2c id为2，兼容之前的0



发布时间：2017/8/8 13:40
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.5
        (1)misc：修正openpwm接口的注释说明
    二、demo脚本修改
        (1)aliyun_ssl_huadong2：修改ProductKey信息，软件上支持硬件看门狗
        (2)mono_lcd：完善功能
        (3)default：修正“由于缺少一个空格，IDE烧写后，出现语法错误”的问题



发布时间：2017/7/26 11:19
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.4
        (1)net.lua：修正“移动PLMN被放入FLPMN列表中导致无法注册网络”的问题
        (2)mqtt.lua、mqttssl.lua：
		修正“tmqtt:disconnect接口断开连接后，又自动重连”的问题
		新增tmqtt:setcleansession接口
	(3)aliyuniotssl.lua、aliyuniotsslauth.lua：支持阿里云华东2节点
        (4)misc.lua：支持pwm输出功能
    二、demo脚本修改
        (1)socket_ssl\long_connection的demo：更换服务器CA证书文件
        (2)新增fs：演示文件操作接口的使用
        (3)新增format_string：演示数据格式转换接口的使用
        (4)uart：新增“uart发送数据完成后，异步消息通知”功能的使用说明
        (5)新增adc：演示adc功能的使用说明
        (6)crypto：完善注释
        (7)mqtt、mqtt_ssl：演示tmqtt:setcleansession接口的使用说明
        (8)新增aliyun_ssl_huadong2：支持阿里云华东2节点
        (9)新增pwm：支持pwm输出功能


发布时间：2017/7/7 11:44
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.3
        (1)link.lua：新增“设置连接过程和数据发送过程中TCP协议的重连参数”的接口setretrymode
        (2)mqtt.lua,mqttssl.lua：publish接口支持retain参数的设置



发布时间：2017/6/30 22:34
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.2
        (1)sys.lua：底层版本不是最新时，仅打印一个警告，不再上报错误信息到dbg服务器
        (2)link.lua：修正“用户设置了激活数据网络失败回调函数后，概率性不会执行回调”的问题
	(3)update.lua：完善重试机制
    二、demo脚本修改
        (1)新增update\Luat_iot_server_daemon的demo：支持iot后台的远程升级以及调试信息上报功能



发布时间：2017/6/27 20:41
修改记录：
    一、lib脚本修改
        lib脚本版本号：1.0.1
        (1)sys.lua：
		修正“dbg模块不能上报sys.restart原因值”的问题
		加快Lua内存自动回收速度
        (2)dbg.lua：修改重启接口的提示前缀
        (3)link.lua：
		新增setiperrcb接口，可设置激活IP数据网络超时失败后的回调函数
		修正“dbg模块、update模块、ntp模块和用户应用socket重连时”的冲突问题



发布时间：2017/5/31 13:17
修改记录：
    第一次发布